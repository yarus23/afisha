Ext.define("Afisha.controller.AfishaC.TilesView",{extend:"Ext.app.Controller",config:{refs:{view:"tiles"},control:{view:{afishaPressed:"onAfishaPressed",newsPressed:"onNewsPressed",cinemaPressed:"onCinemaPressed",clubsPressed:"onClubsPressed",shopPressed:"onShopPressed",restaurantPressed:"onRestaurantPressed",favPressed:"onFavPressed",settingsPressed:"onSettingsPressed",discountsPressed:"onDiscountsPressed",healthPressed:"onHealthPressed"}}},onAfishaPressed:function(){this.getApplication().fireEvent("showItem","categories")},onNewsPressed:function(){this.getApplication().fireEvent("showItem","newslist")},onCinemaPressed:function(){this.getApplication().fireEvent("switchTo","cinema")},onClubsPressed:function(){this.getApplication().fireEvent("switchTo","club")},onShopPressed:function(){this.getApplication().fireEvent("switchTo","shop")},onRestaurantPressed:function(){this.getApplication().fireEvent("switchTo","restaurant")},onFavPressed:function(){this.getApplication().fireEvent("showItem","favcontent")},onSettingsPressed:function(){this.getApplication().fireEvent("showItem","mainsettings")},onDiscountsPressed:function(){this.getApplication().fireEvent("showItem","disclist")},onHealthPressed:function(){this.getApplication().fireEvent("switchTo","beauty")},launch:function(){var b=[{items:[{title:"Афиша",icon:"6w",bg:"#00bce2",flex:2,handler:"afishaPressed",text:"Все актуальные события в городе. Кинопремьеры, анонсы концертов",id:"afisha"},{title:"Настройки",icon:"2w",bg:"#1ba456",color:"white",id:"settings",handler:"settingsPressed"}]},{items:[{title:"Клубы",icon:"4w",bg:"#202020",id:"clubs",handler:"clubsPressed"},{title:"Новости",icon:"5w",bg:"#cf274b",id:"news",handler:"newsPressed"},{title:"Кино",icon:"9",bg:"#c0df05",color:"black",id:"cinema",handler:"cinemaPressed"}]},{items:[{title:"Скидки",icon:"3",bg:"#e8e8e8",color:"black",id:"discounts",handler:"discountsPressed"},{title:"Рестораны",icon:"10w",bg:"#74331d",descrColor:"white",flex:2,handler:"restaurantPressed",text:"Заказать столик в любом из баров Улан-Удэ. Узнать отзывы посетителей",id:"pubs"}]},{items:[{title:"Красота",icon:"8w",bg:"#202020",id:"health",handler:"healthPressed"},{title:"Доставка на дом",icon:"7w",bg:"#00bce2",id:"shop",handler:"shopPressed"},{title:"Избранное",icon:"1w",bg:"#e66021",id:"favorites",handler:"favPressed"}]}];for(var k in b){var n=Ext.create("Ext.Container",{cls:"tilerow",layout:{type:"hbox",align:"stretch"},flex:1,defaults:{flex:1}});var e=b[k].items;for(var d in e){var a="";if(e[d].bg){a+="background-color: "+e[d].bg+";"}var m=e[d].handler;var f=this;var g=(function(i){return Ext.create("Ext.Panel",Ext.apply(e[d],{cls:"tilebutton",layout:"fit",style:a,listeners:{element:"element",tap:function(){if(i){this.getView().fireEvent(i)}},scope:f}}))})(m);if(!e[d].text){e[d].text=""}var c={cls:"tileTitle",html:e[d].title};if(e[d].color){c.style="color: "+e[d].color}var j=Ext.create("Ext.Container",c);var h=Ext.create("Ext.Container",{items:[j,{layout:{type:"hbox",align:"stretch"},items:[{html:e[d].text,flex:e[d].text?3:1,cls:"tileDescr",style:e[d].descrColor?"color: "+e[d].descrColor:""},{flex:1,style:e[d].icon?"height:3.2em;":""}]}]});if(e[d].icon){var l=Ext.create("Ext.Container",{style:'background-position: 95% 90%; position:absolute; background-repeat: no-repeat; background-image: url("resources/icons/'+e[d].icon+'.png")'});g.add(l)}g.add(h);n.add(g)}this.getView().add(n)}}});