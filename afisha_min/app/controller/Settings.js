Ext.define("Afisha.controller.Settings",{extend:"Ext.app.Controller",config:{refs:{viewport:"aviewport",useGPSField:"aviewport checkboxfield#useGPSField",fontSizeSettings:"aviewport sliderfield#fontSizeSettings"},control:{fontSizeSettings:{change:"onFontChange"},useGPSField:{change:"onGpsCheck"}}},launch:function(){this.getApplication().on({setFont:this.setFont,scope:this});this.applyFontToElem(Afisha.app.Settings.getFontSize())},goBack:function(){return false},initView:function(a){var b=Afisha.app.Settings.getFontSize();var c=Afisha.app.Settings.getUseGPS();c?this.getUseGPSField().check():this.getUseGPSField().uncheck();this.getFontSizeSettings().setValue(b)},onFontChange:function(e,d,b,c,a){this.setFont(c)},onGpsCheck:function(c,b,a){Afisha.app.Settings.saveUseGPS(b)},setFont:function(a){a=Afisha.app.Settings.saveFontSize(a);this.applyFontToElem(a)},applyFontToElem:function(c){var a=this.getViewport().element.query(".fontSized");for(var b=0;b<a.length;b++){a[b].style.setProperty("font-size",c+"em")}}});