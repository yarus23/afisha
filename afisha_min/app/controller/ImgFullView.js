Ext.define("Afisha.controller.ImgFullView",{extend:"Ext.app.Controller",config:{refs:{viewport:"aviewport",imgFullView:"aviewport imgfullview",imgFullViewC:"aviewport imgfullview carousel",imgPreviewC:"aviewport photogallery carousel",imgPreview:"aviewport photogallery carousel img",imgView:"aviewport imgfullview carousel img"},control:{imgPreviewC:{activeitemchange:"nextSlide"},imgFullViewC:{activeitemchange:"nextSlide"},imgView:{load:"onImgLoad",tap:"onImgTap"},imgPreview:{load:"onImgLoad",tap:"onImgTap"}}},onImgLoad:function(a){a.setHtml("")},onImgTap:function(b){if(this.getViewport().getActiveItem().xtype=="imgfullview"){this.getApplication().fireEvent("goBack");return}var c=b.up("photogallery").getData();var a=b.getParent().getActiveIndex();this.getApplication().fireEvent("showItem","imgfullview",{data:c,idx:a})},nextSlide:function(b,c,a){if(c.getSrc()){return}c.setSrc(c.config.img)},goBack:function(){return false},initView:function(a){this.getImgFullView().loadPictureList(a.data,a.idx)},});