Ext.define("Afisha.util.Settings",{config:{fontSize:1,userName:"",settingsStore:null,settingsRecord:null,fontStep:0.1,fontMinSize:0.5,fontMaxSize:2,useGPS:true},constructor:function(b){var a;this.initConfig(b);a=Ext.getStore("Settings");if(!a){return}this.setSettingsStore(a);a.load(this.setParams,this)},upperFont:function(){return this.saveFontSize(this.getFontSize()+this.getFontStep())},lowerFont:function(){return this.saveFontSize(this.getFontSize()-this.getFontStep())},saveUseName:function(b){var a=this.getSettingsRecord();if(!b||!a){return false}this.setUserName(b);a.set("userName",b);a.save();return true},saveUseGPS:function(b){var a=this.getSettingsRecord();if(!a){return false}this.setUseGPS(b);a.set("useGps",b);a.save();return true},saveFontSize:function(b){var a;if(b>this.getFontMaxSize()+0.1){return this.getFontMaxSize()}if(b<this.getFontMinSize()){return this.getFontMinSize()}a=this.getSettingsRecord();if(!a){return b}this.setFontSize(b);a.set("font-size",b);a.save();return b},setParams:function(d,c,f){var b,a,e;b=this.getSettingsStore();if(!b){return}if(d.length){this.setSettingsRecord(d[0]);this.setFontSize(d[0].get("font-size"));this.setUserName(d[0].get("userName"))}else{e=b.getModel();a=new e({});b.add(a);b.sync();this.setSettingsRecord(a);this.setFontSize(a.get("font-size"));this.setUserName(a.get("userName"))}}});